<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pyIoTDevSim: pyIoTDevSim</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_150_150.png"/></td>
  <td id="projectalign">
   <div id="projectname">pyIoTDevSim<span id="projectnumber">&#160;0.2.0</span>
   </div>
   <div id="projectbrief">IoT device simulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__c_1_2_agro_tech_lab_2_tools_2pyiotdevsim_2_r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">pyIoTDevSim</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>It is a IoT device simulator that uses a real LoRaWAN&reg; module (connected to serial port) to sent simulated IoT data to TTN&reg; (<a href="https://www.thethingsnetwork.org">The Things Network</a>) infrastructure.<br  />
</p>
<p><img src="./docs/figs/scheme.png" alt="SCHEME schematic connection" title="Connection scheme" class="inline"/><br  />
</p>
<h1>Configuration file details</h1>
<p>The pyIoTDevSim.yml is the configuration file searched by pyIoTDevSim to sets system, LoRa and projects parameters.<br  />
 It uses a YAML format and all sections and keys parameters must be defined in lower case mode.<br  />
 Two main sections are defined:</p><ul>
<li><code>system</code> - defines common LoRa parameters, LoRa module interface and the debug level used;</li>
<li><code>projects</code> - list the projects enabled to run;</li>
</ul>
<p>The <code>system</code> parameters are the same to all projects:</p><ul>
<li><code>debug_level</code> - pyIoTDevSim debug level (ie: DEBUG);</li>
<li><code>lora_module</code> - LoRa module (ie: RHF76-052);</li>
<li><code>serial</code> - subsection with serial parameters:<ul>
<li><code>port</code> - serial port (ie: /dev/ttyUSB0);</li>
<li><code>baudrade</code> - serial baudrate (ie: 9600);</li>
</ul>
</li>
<li><code>lora</code> - subsection with LoRa parameters:<ul>
<li><code>base_band</code> - LoRa base band (ie: AU920);</li>
<li><code>sub_band</code> - LoRa sub-band (ie: 2);</li>
<li><code>class</code> - LoRa class (ie: A);</li>
<li><code>rxwin2_freq</code> - LoRa RX window 2 frequency (ie: 923.3);</li>
<li><code>rxwin2_dr</code> - LoRa RX window 2 data ratio (ie.: DR8);</li>
<li><code>auth_mode</code> - LoRa authentication mode (ie: LWABP);</li>
</ul>
</li>
</ul>
<p>The <code>projects</code> section list the name of projects enabled to run. An example is showed bellow (in this case Project C is defined but not will be enabled):</p><pre>projects:<br  />
&amp;#9;- Project_A<br  />
&amp;#9;- Project_B<br  />
&amp;#9;# - Project_C</pre><p>Ater, to each project listed at <code>projects</code> section a new section must be created with the following parameters: <br  />
</p><ul>
<li><code>project_name</code> - section with the project name (the same used at <code>projects</code> section);<ul>
<li><code>sampling_period</code> - sampling period (in seconds) of sensor list (ie: 300);</li>
<li><code>ttn</code> - subsection with TTN (The Things Network) parameters:<ul>
<li><code>dev_eui</code> - device EUI;</li>
<li><code>app_eui</code> - application EUI;</li>
<li><code>dev_addr</code> - device address;</li>
<li><code>nwks_key</code> - network session key;</li>
<li><code>apps_key</code> - application session key;</li>
<li><code>app_key</code> - application key;</li>
</ul>
</li>
<li><code>lora</code> - subsection with LoRa parameters:<ul>
<li><code>tx_power</code> - transmission power in dB (ie: 20);</li>
<li><code>uplink_dr</code> - uplink data ratio (ie: DR1);</li>
<li><code>chan0_freq</code> - channel 0 frequency (ie: 917.2);</li>
<li><code>chan0_dr</code> - channel 0 data ratio (ie: DR1);</li>
<li><code>chan1_freq</code> - channel 1 frequency (ie: 917.9);</li>
<li><code>chan1_dr</code> - channel 1 data ratio (ie: DR1);</li>
<li><code>adr</code> - automatic data ratio (ie: OFF);</li>
<li><code>repeat</code> - transmission repeat (ie: 2);</li>
<li><code>retry</code> - transmission retry (ie: 2);</li>
<li><code>initial_port</code> - initial port number to transmission sensor values (ie: 10);</li>
</ul>
</li>
<li><code>sensor_list</code> - subsection with a list of sensors;</li>
<li><code>sensor_name</code> - subsection with sensor parameters (one to each sensor listed at <code>sensor_list</code>):<ul>
<li><code>data_type</code> - sensor data type (ie: float32);</li>
<li><code>min_value</code> - sensor minimum value (ie: -27.803293);</li>
<li><code>max_value</code> - sensor maximum value (ie: -27.804540);</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Sensor values are randomly generated between values defines at <code>min_value</code> and <code>max_value</code>. To fixed values both parameters must be the same. The <code>data_type</code> will define the data type and payload size used to compose LoRa message (all messages are sent using hexadecimal format). The following data types can be used:</p><ul>
<li><code>uint8</code><ul>
<li><b>range:</b> 0 to 255</li>
<li><b>size:</b> 1 byte</li>
</ul>
</li>
<li><code>uint16</code><ul>
<li><b>range:</b> 0 to 65535</li>
<li><b>size:</b> 2 bytes</li>
</ul>
</li>
<li><code>float_uint16</code><ul>
<li><b>range:</b> 0 to 655.35</li>
<li><b>size:</b> 2 bytes</li>
<li><b>limitation:</b> only 2 digits of precision</li>
<li><b>operation:</b> value * 100</li>
</ul>
</li>
<li><code>float32_compressed</code><ul>
<li><b>range:</b> -655.35 to 655.35</li>
<li><b>size:</b> 3 bytes</li>
<li><b>limitation:</b> byte 0 is the sign (AA = + / AF = -); only 2 digits of precision</li>
<li><b>operation:</b> value * 100</li>
</ul>
</li>
<li><code>float32</code><ul>
<li><b>range:</b> -3.4E+38 to +3.4E+38</li>
<li><b>size:</b> 4 bytes</li>
<li><b>operation:</b> sign bit, 8 bits exponent, 23 bits mantissa</li>
</ul>
</li>
</ul>
<h1>Release Notes</h1>
<h2><b>Version 0.2.0 (26/02/2021):</b></h2>
<ul>
<li>Added RHF0M003 module compatibility;</li>
<li>Moved LoRa session to Project session as a subsession (like TTN);</li>
<li>Included sub-band parameter;</li>
<li>Change module configuration (disable all channels of sub-bands not used);</li>
</ul>
<h2><b>Version 0.1.0 (16/11/2020):</b></h2>
<ul>
<li>Added RHF72-056 module compatibility;</li>
<li>Multiproject capability (one thread by project);</li>
<li>Configuration by YAML file;<ul>
<li>Project session (with TTN subsession);</li>
<li>LoRa session;</li>
<li>Serial session;</li>
</ul>
</li>
<li>Payload sent using HEX format;</li>
<li>Data types:<ul>
<li>UINT8;</li>
<li>UINT16;</li>
<li>FLOAT_UINT16;</li>
<li>FLOAT_COMPRESSED;</li>
<li>FLOAT32;</li>
</ul>
</li>
<li>LOG generation;</li>
</ul>
<hr  />
<p> AgroTechLab (<em>Laboratório de Desenvolvimento de Tecnologias para o Agronegócio</em>) <br  />
 IFSC (<em>Instituto Federal de Santa Catarina</em>) - Câmpus Lages <br  />
 Rua Heitor Vila Lobos, 225 - São Francisco <br  />
 Lages/SC - Brazil <br  />
 CEP: 88.506-400 <br  />
 <a href="https://agrotechlab.lages.ifsc.edu.br">https://agrotechlab.lages.ifsc.edu.br</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<br><hr><p style="text-align: center;"><b><a href="https://agrotechlab.lages.ifsc.edu.br/">AgroTechLab (<i>Laboratório de Desenvolvimento de Tecnologias para o Agronegócio</i>)</a></b><br>
    <b><a href="https://ifsc.edu.br/web/campus-lages">IFSC (<i>Instituto Federal de Santa Catarina</i>) - Câmpus Lages</a></b><br>
    Rua Heitor Vila Lobos, 225 - São Francisco<br>
    Lages/SC - Brazil<br>
    CEP: 88.506-400</p>